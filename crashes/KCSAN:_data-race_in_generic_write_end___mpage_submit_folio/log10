syzkaller login: [   17.427325] ==================================================================
[   17.427977] BUG: KCSAN: data-race in generic_write_end / mpage_submit_folio
[   17.428581] 
[   17.428730] write to 0xffff8dd40528a578 of 8 bytes by task 328 on cpu 1:
[   17.429237]  generic_write_end+0x9d/0x200
[   17.429565]  ext4_da_write_end+0xfb/0x600
[   17.429889]  generic_perform_write+0x205/0x360
[   17.430225]  ext4_buffered_write_iter+0xa9/0x1c0
[   17.430583]  ext4_file_write_iter+0xcd/0xdd0
[   17.430961]  vfs_write+0x5d0/0x700
[   17.431228]  ksys_write+0x9e/0x160
[   17.431520]  __x64_sys_write+0x41/0x50
[   17.431826]  do_syscall_64+0x3e/0x90
[   17.432129]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.432539] 
[   17.432680] read to 0xffff8dd40528a578 of 8 bytes by task 10 on cpu 0:
[   17.433166]  mpage_submit_folio+0x58/0x130
[   17.433532]  mpage_map_and_submit_buffers+0x31c/0x5a0
[   17.433930]  ext4_do_writepages+0xcd5/0x1830
[   17.434279]  ext4_writepages+0x19c/0x320
[   17.434607]  do_writepages+0xb5/0x2e0
[   17.434934]  __writeback_single_inode+0x72/0x650
[   17.435319]  writeback_sb_inodes+0x463/0x930
[   17.435667]  __writeback_inodes_wb+0x72/0x160
[   17.436024]  wb_writeback+0x211/0x4e0
[   17.436345]  wb_workfn+0x5df/0x8e0
[   17.436628]  process_one_work+0x545/0x9c0
[   17.436957]  worker_thread+0x33d/0x8d0
[   17.437270]  kthread+0x1b1/0x200
[   17.437515]  ret_from_fork+0x2f/0x50
[   17.437769]  ret_from_fork_asm+0x1b/0x30
[   17.438053] 
[   17.438203] value changed: 0x0000000001598000 -> 0x000000000159a000
[   17.438615] 
[   17.438736] Reported by Kernel Concurrency Sanitizer on:
[   17.439104] CPU: 0 PID: 10 Comm: kworker/u4:0 Not tainted 6.5.0 #8
[   17.439516] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
[   17.440040] Workqueue: writeback wb_workfn (flush-8:0)
[   17.440502] ==================================================================
[   17.567843] scp (328) used greatest stack depth: 11664 bytes left

VM DIAGNOSIS:
09:14:48  Registers:
info registers vcpu 0
RAX=0000000080000000 RBX=0000000a95d5623d RCX=0000000000000000 RDX=0000000000000001
RSI=ffffffffbc8c1c84 RDI=00000000ffffffff RBP=0000000a95d4e0d9 RSP=ffffb0cb80627d28
R8 =000000010830a067 R9 =00118dd40631a7f0 R10=0000000000000000 R11=000000000000001a
R12=0000000000000000 R13=000000000002a780 R14=ffffffffba9b06fa R15=0000000000000286
RIP=ffffffffbc046bf2 RFL=00000086 [--S--P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0000 0000000000000000 00000000 00000000
DS =0000 0000000000000000 00000000 00000000
FS =0000 00007f020a3998c0 00000000 00000000
GS =0000 ffff8dd537c00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe7121268000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe7121266000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007f0204b570e1 CR3=000000010631a001 CR4=00770ef0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00001f80
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM01=0000000000000000 0000000000000000 2e322e302e30313d 656d616e74736f68
YMM02=0000000000000000 0000000000000000 20322e322e302e30 313d726464612032
YMM03=0000000000000000 0000000000000000 736572206873733d 6c616e696d726574
YMM04=0000000000000000 0000000000000000 2022646873732f6e 6962732f7273752f
YMM05=0000000000000000 0000000000000000 5a5a5a5a5a5a5a5a 5a5a5a5a5a5a5a5a
YMM06=0000000000000000 0000000000000000 2020202020202020 2020202020202020
YMM07=0000000000000000 0000000000000000 0000ff0000ff00ff 0000000000ffffff
YMM08=0000000000000000 0000000000000000 0000000000000000 0000000000202020
YMM09=0000000000000000 0000000000000000 ff0000ffffffffff ff00000000ffffff
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0f4790056c4bc3fd 830d52ed55a010c3
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
info registers vcpu 1
RAX=0000000000000001 RBX=0000000000000001 RCX=ffffffffbc0515b4 RDX=0000000000000005
RSI=ffffffffbc8c1c84 RDI=000000000001be3c RBP=ffff8dd400209100 RSP=ffffb0cb8008bee8
R8 =ffffffffbdec4410 R9 =0000000000000000 R10=0000000000000005 R11=0001ffffffffffff
R12=0000000000000000 R13=0000000000000000 R14=0000000000000000 R15=0000000000000000
RIP=ffffffffbc0524bf RFL=00000216 [----AP-] CPL=0 II=0 A20=1 SMM=0 HLT=1
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0018 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0000 0000000000000000 00000000 00000000
FS =0000 0000000000000000 00000000 00000000
GS =0000 ffff8dd537d00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe0e3ec04000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe0e3ec02000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007f51ef8ae188 CR3=00000001003f6002 CR4=00770ee0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00001f80
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 2038343a34313a39 302030332074634f
YMM01=0000000000000000 0000000000000000 20726f6620646573 6f6c63206e6f6973
YMM02=0000000000000000 0000000000000000 616b7a7973203834 3a34313a39302030
YMM03=0000000000000000 0000000000000000 203a5d3932335b64 6873732072656c6c
YMM04=0000000000000000 0000000000000000 65733a6468737328 78696e755f6d6170
YMM05=0000000000000000 0000000000000000 206e6f6973736573 203a296e6f697373
YMM06=0000000000000000 0000000000000000 20726f6620646573 6f6c63206e6f6973
YMM07=0000000000000000 0000000000000000 696d72655020203a 78756e694c455320
YMM08=0000000000000000 0000000000000000 0000000000000000 0000000000000a2e
YMM09=0000000000000000 0000000000000000 0000ffffffffffff ffffffffffffff00
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
