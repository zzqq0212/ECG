syzkaller login: [   17.430873] ==================================================================
[   17.431554] BUG: KCSAN: data-race in generic_write_end / mpage_submit_folio
[   17.432039] 
[   17.432165] write to 0xffffa04e052517f8 of 8 bytes by task 337 on cpu 0:
[   17.432727]  generic_write_end+0x9d/0x200
[   17.433037]  ext4_da_write_end+0xfb/0x600
[   17.433336]  generic_perform_write+0x205/0x360
[   17.433712]  ext4_buffered_write_iter+0xa9/0x1c0
[   17.434156]  ext4_file_write_iter+0xcd/0xdd0
[   17.434560]  vfs_write+0x5d0/0x700
[   17.434816]  ksys_write+0x9e/0x160
[   17.435071]  __x64_sys_write+0x41/0x50
[   17.435440]  do_syscall_64+0x3e/0x90
[   17.435715]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.436161] 
[   17.436286] read to 0xffffa04e052517f8 of 8 bytes by task 31 on cpu 1:
[   17.436717]  mpage_submit_folio+0x58/0x130
[   17.437257]  mpage_map_and_submit_buffers+0x31c/0x5a0
[   17.437607]  ext4_do_writepages+0xcd5/0x1830
[   17.437919]  ext4_writepages+0x19c/0x320
[   17.438461]  do_writepages+0xb5/0x2e0
[   17.438805]  __writeback_single_inode+0x72/0x650
[   17.439224]  writeback_sb_inodes+0x463/0x930
[   17.439528]  __writeback_inodes_wb+0x72/0x160
[   17.439833]  wb_writeback+0x211/0x4e0
[   17.440094]  wb_workfn+0x5df/0x8e0
[   17.440348]  process_one_work+0x545/0x9c0
[   17.440718]  worker_thread+0x33d/0x8d0
[   17.440991]  kthread+0x1b1/0x200
[   17.441237]  ret_from_fork+0x2f/0x50
[   17.441562]  ret_from_fork_asm+0x1b/0x30
[   17.441843] 
[   17.441962] value changed: 0x00000000014c6000 -> 0x00000000014c7000
[   17.442360] 
[   17.442513] Reported by Kernel Concurrency Sanitizer on:
[   17.443007] CPU: 1 PID: 31 Comm: kworker/u4:2 Not tainted 6.5.0 #8
[   17.443411] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
[   17.443988] Workqueue: writeback wb_workfn (flush-8:0)
[   17.444352] ==================================================================
[   17.506448] ==================================================================
[   17.506960] BUG: KCSAN: data-race in generic_write_end / mpage_process_page_bufs
[   17.507563] 
[   17.507684] write to 0xffffa04e052517f8 of 8 bytes by task 337 on cpu 0:
[   17.508111]  generic_write_end+0x9d/0x200
[   17.508418]  ext4_da_write_end+0xfb/0x600
[   17.508706]  generic_perform_write+0x205/0x360
[   17.509118]  ext4_buffered_write_iter+0xa9/0x1c0
[   17.509531]  ext4_file_write_iter+0xcd/0xdd0
[   17.509873]  vfs_write+0x5d0/0x700
[   17.510122]  ksys_write+0x9e/0x160
[   17.510460]  __x64_sys_write+0x41/0x50
[   17.510732]  do_syscall_64+0x3e/0x90
[   17.511001]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.511370] 
[   17.511495] read to 0xffffa04e052517f8 of 8 bytes by task 31 on cpu 1:
[   17.511942]  mpage_process_page_bufs+0x33/0x3f0
[   17.512271]  mpage_prepare_extent_to_map+0x79a/0x9d0
[   17.512669]  ext4_do_writepages+0x80d/0x1830
[   17.512985]  ext4_writepages+0x19c/0x320
[   17.513266]  do_writepages+0xb5/0x2e0
[   17.513572]  __writeback_single_inode+0x72/0x650
[   17.513894]  writeback_sb_inodes+0x463/0x930
[   17.514306]  __writeback_inodes_wb+0x72/0x160
[   17.514700]  wb_writeback+0x211/0x4e0
[   17.515059]  wb_workfn+0x5df/0x8e0
[   17.515310]  process_one_work+0x545/0x9c0
[   17.515592]  worker_thread+0x33d/0x8d0
[   17.515897]  kthread+0x1b1/0x200
[   17.516144]  ret_from_fork+0x2f/0x50
[   17.516398]  ret_from_fork_asm+0x1b/0x30
[   17.516687] 
[   17.516805] value changed: 0x000000000172e000 -> 0x0000000001730000
[   17.517293] 
[   17.517413] Reported by Kernel Concurrency Sanitizer on:
[   17.517751] CPU: 1 PID: 31 Comm: kworker/u4:2 Not tainted 6.5.0 #8
[   17.518256] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
[   17.518772] Workqueue: writeback wb_workfn (flush-8:0)
[   17.519159] ==================================================================

VM DIAGNOSIS:
09:31:31  Registers:
info registers vcpu 0
RAX=0000000000000000 RBX=0000000000000073 RCX=ffffffff88a6adee RDX=ffffa04e0202c400
RSI=0000000000000000 RDI=ffffa8d540847da0 RBP=ffffa8d540847c28 RSP=ffffa8d540847c20
R8 =ffffffff8bec4310 R9 =0000000000000000 R10=ffffffff88a6ade5 R11=0001ffffffffffff
R12=ffffa04e0121e600 R13=ffffa8d540847d60 R14=0000000000000002 R15=0000000000000011
RIP=ffffffff88a6ae10 RFL=00000296 [--S-AP-] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0018 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0000 0000000000000000 00000000 00000000
FS =0000 00007ff76804b8c0 00000000 00000000
GS =0000 ffffa04f37c00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe49be20d000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe49be20b000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007ffe43003e68 CR3=00000001003da004 CR4=00770ef0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00009fc0
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 ffff00000000ff00 0000000000000000
YMM01=0000000000000000 0000000000000000 ffff00000000ff00 0000000000000000
YMM02=0000000000000000 0000000000000000 ffffffffffff0000 ffffffffffffff00
YMM03=0000000000000000 0000000000000000 ffff000000000000 ffffff00ffffff00
YMM04=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM05=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM06=0000000000000000 0000000000000000 ffff00ff00000000 0000000000000000
YMM07=0000000000000000 0000000000000000 693bd129e125714a 00000000001b0bf8
YMM08=0000000000000000 0000000000000000 aec717572fd0af84 00000000001e1b40
YMM09=0000000000000000 0000000000000000 ffff00ffffff0000 0000ffffff00ffff
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
info registers vcpu 1
RAX=000000009f5bd767 RBX=0000000a9f5bd6a3 RCX=0000000000000001 RDX=000000000000000a
RSI=ffffffff8a8c1c84 RDI=ffffffff8a8d3d9c RBP=0000000a9f5b6dbf RSP=ffffa8d54077fb80
R8 =ffffa04e03313780 R9 =0011a8d54077fd38 R10=0000000000000000 R11=000000000000003f
R12=0000000000000001 R13=00000000000234a7 R14=ffffffff8a02587f R15=0000000000000282
RIP=ffffffff8a046c09 RFL=00000046 [---Z-P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0018 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0000 0000000000000000 00000000 00000000
FS =0000 00007fb71bbd28c0 00000000 00000000
GS =0000 ffffa04f37d00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe4c06d78000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe4c06d76000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007fb7163900e1 CR3=0000000104c78001 CR4=00770ee0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00001f80
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM01=0000000000000000 0000000000000000 2e322e302e30313d 656d616e74736f68
YMM02=0000000000000000 0000000000000000 2022646873732f6e 6962732f7273752f
YMM03=0000000000000000 0000000000000000 223d657865202274 6f6f72223d746363
YMM04=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM05=0000000000000000 0000000000000000 5a5a5a5a5a5a5a5a 5a5a5a5a5a5a5a5a
YMM06=0000000000000000 0000000000000000 2020202020202020 2020202020202020
YMM07=0000000000000000 0000000000000000 0000ff00000000ff 0000000000ffffff
YMM08=0000000000000000 0000000000000000 0000000000000000 0000000000202020
YMM09=0000000000000000 0000000000000000 ff0000ffffffffff ff00000000ffffff
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0f4790056c4bc3fd 830d52ed55a010c3
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
