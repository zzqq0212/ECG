syzkaller login: [   17.711971] ==================================================================
[   17.712620] BUG: KCSAN: data-race in generic_write_end / mpage_submit_folio
[   17.713255] 
[   17.713389] write to 0xffff98ff842a05f8 of 8 bytes by task 337 on cpu 0:
[   17.713935]  generic_write_end+0x9d/0x200
[   17.714345]  ext4_da_write_end+0xfb/0x600
[   17.714661]  generic_perform_write+0x205/0x360
[   17.715111]  ext4_buffered_write_iter+0xa9/0x1c0
[   17.715480]  ext4_file_write_iter+0xcd/0xdd0
[   17.715819]  vfs_write+0x5d0/0x700
[   17.716145]  ksys_write+0x9e/0x160
[   17.716482]  __x64_sys_write+0x41/0x50
[   17.716786]  do_syscall_64+0x3e/0x90
[   17.717177]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.717571] 
[   17.717695] read to 0xffff98ff842a05f8 of 8 bytes by task 10 on cpu 1:
[   17.718257]  mpage_submit_folio+0x58/0x130
[   17.718569]  mpage_map_and_submit_buffers+0x31c/0x5a0
[   17.718947]  ext4_do_writepages+0xcd5/0x1830
[   17.719382]  ext4_writepages+0x19c/0x320
[   17.719699]  do_writepages+0xb5/0x2e0
[   17.720073]  __writeback_single_inode+0x72/0x650
[   17.720578]  writeback_sb_inodes+0x463/0x930
[   17.720916]  __writeback_inodes_wb+0x72/0x160
[   17.721367]  wb_writeback+0x211/0x4e0
[   17.721659]  wb_workfn+0x5df/0x8e0
[   17.721933]  process_one_work+0x545/0x9c0
[   17.722265]  worker_thread+0x33d/0x8d0
[   17.722563]  kthread+0x1b1/0x200
[   17.722916]  ret_from_fork+0x2f/0x50
[   17.723332]  ret_from_fork_asm+0x1b/0x30
[   17.723652] 
[   17.723784] value changed: 0x00000000013f3000 -> 0x00000000013f4000
[   17.724377] 
[   17.724506] Reported by Kernel Concurrency Sanitizer on:
[   17.724900] CPU: 1 PID: 10 Comm: kworker/u4:0 Not tainted 6.5.0 #8
[   17.725365] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
[   17.726059] Workqueue: writeback wb_workfn (flush-8:0)
[   17.726552] ==================================================================
[   17.881750] scp (337) used greatest stack depth: 10592 bytes left
Warning: Permanently added '[localhost]:56692' (ED25519) to the list of known hosts.
[   23.877452] audit: type=1400 audit(1698662108.958:8): avc:  denied  { execmem } for  pid=360 comm="syz-executor117" scontext=system_u:system_r:kernel_t:s0 tcontext=system_u:system_r:kernel_t:s0 tclass=process permissive=1
Setting up swapspace version 1, size = 122.1 MiB (127995904 bytes)
no label, UUID=310a894e-5481-43d5-bae8-b660767f275e
[   23.911779] Adding 124996k swap on ./swap-file.  Priority:0 extents:1 across:124996k 
executing program
write to /proc/sys/kernel/hung_task_check_interval_secs failed: No such file or directory
write to /proc/sys/net/core/bpf_jit_kallsyms failed: No such file or directory
write to /proc/sys/net/core/bpf_jit_harden failed: No such file or directory
write to /proc/sys/kernel/softlockup_all_cpu_backtrace failed: No such file or directory
write to /proc/sys/kernel/hung_task_check_interval_secs failed: No such file or directory
write to /proc/sys/net/core/bpf_jit_kallsyms failed: No such file or directory
write to /proc/sys/net/core/bpf_jit_harden failed: No such file or directory
write to /proc/sys/kernel/softlockup_all_cpu_backtrace failed: No such file or directory

VM DIAGNOSIS:
10:35:08  Registers:
info registers vcpu 0
RAX=0000000080000001 RBX=ffffaa1cc064bbec RCX=ffffffffb2faa465 RDX=ffff98ff823f2200
RSI=0000000080000001 RDI=ffff98ff820eb2c8 RBP=0000000000000001 RSP=ffffaa1cc064bb00
R8 =ffffffffb64c4430 R9 =0000000000000000 R10=ffffffffb35619bd R11=0001ffffffffffff
R12=ffff98ff820eb2a8 R13=00000000fffffffd R14=ffffd98c44114548 R15=ffff98ff83c4a600
RIP=ffffffffb2e72721 RFL=00000282 [--S----] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0018 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0000 0000000000000000 00000000 00000000
FS =0000 0000000000000000 00000000 00000000
GS =0000 ffff9900b7c00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe78e2cc1000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe78e2cbf000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007ff9cb2fe0e1 CR3=0000000108d2c001 CR4=00770ef0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00001f80
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM01=0000000000000000 0000000000000000 2e322e302e30313d 656d616e74736f68
YMM02=0000000000000000 0000000000000000 20322e322e302e30 313d726464612032
YMM03=0000000000000000 0000000000000000 736572206873733d 6c616e696d726574
YMM04=0000000000000000 0000000000000000 2022646873732f6e 6962732f7273752f
YMM05=0000000000000000 0000000000000000 5a5a5a5a5a5a5a5a 5a5a5a5a5a5a5a5a
YMM06=0000000000000000 0000000000000000 2020202020202020 2020202020202020
YMM07=0000000000000000 0000000000000000 0000ff000000ffff 0000000000ffffff
YMM08=0000000000000000 0000000000000000 0000000000000000 0000000000202020
YMM09=0000000000000000 0000000000000000 ff0000ffffffffff ff00000000ffffff
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0f4790056c4bc3fd 830d52ed55a010c3
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
info registers vcpu 1
RAX=0000000000000001 RBX=0000000000000001 RCX=ffffffffb46515b4 RDX=0000000000000005
RSI=ffffffffb4ec1c84 RDI=000000000022c1bc RBP=ffff98ff80209100 RSP=ffffaa1cc008bee8
R8 =ffffffffb64c4410 R9 =0000000000000000 R10=0000000000000005 R11=0001ffffffffffff
R12=0000000000000000 R13=0000000000000000 R14=0000000000000000 R15=0000000000000000
RIP=ffffffffb46524bf RFL=00000212 [----A--] CPL=0 II=0 A20=1 SMM=0 HLT=1
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0018 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0000 0000000000000000 00000000 00000000
FS =0000 0000000000000000 00000000 00000000
GS =0000 ffff9900b7d00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe6037da4000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe6037da2000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007f38ac7b3000 CR3=0000000100186005 CR4=00770ee0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00009fc0
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 8cdec34d38af4c0a 00000000001b0ac0
YMM01=0000000000000000 0000000000000000 80f09f19808d26a3 0000000000162930
YMM02=0000000000000000 0000000000000000 eff9b2d0a8fce9cb 00000000001ceab8
YMM03=0000000000000000 0000000000000000 d59e07bde36eea69 00000000001cea68
YMM04=0000000000000000 0000000000000000 7e8a42789393c4b7 00000000001ce908
YMM05=0000000000000000 0000000000000000 b3285ca56c489dff 00000000001ba2b8
YMM06=0000000000000000 0000000000000000 2fccd54c36d8a3f3 00000000001b2ff8
YMM07=0000000000000000 0000000000000000 693bd129e125714a 00000000001b10a0
YMM08=0000000000000000 0000000000000000 51d3c4a3a58f799e 00000000001db7e0
YMM09=0000000000000000 0000000000000000 ffff00ffffff0000 0000ffffff00ffff
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
