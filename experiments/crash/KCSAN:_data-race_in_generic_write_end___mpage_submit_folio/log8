syzkaller login: [   17.329036] ==================================================================
[   17.329523] BUG: KCSAN: data-race in generic_write_end / mpage_submit_folio
[   17.330230] 
[   17.330353] write to 0xffffa37785233bf8 of 8 bytes by task 329 on cpu 0:
[   17.330785]  generic_write_end+0x9d/0x200
[   17.331120]  ext4_da_write_end+0xfb/0x600
[   17.331514]  generic_perform_write+0x205/0x360
[   17.331852]  ext4_buffered_write_iter+0xa9/0x1c0
[   17.332176]  ext4_file_write_iter+0xcd/0xdd0
[   17.332588]  vfs_write+0x5d0/0x700
[   17.332882]  ksys_write+0x9e/0x160
[   17.333134]  __x64_sys_write+0x41/0x50
[   17.333487]  do_syscall_64+0x3e/0x90
[   17.333789]  entry_SYSCALL_64_after_hwframe+0x6e/0xd8
[   17.334146] 
[   17.334270] read to 0xffffa37785233bf8 of 8 bytes by task 31 on cpu 1:
[   17.334835]  mpage_submit_folio+0x58/0x130
[   17.335125]  mpage_map_and_submit_buffers+0x31c/0x5a0
[   17.335575]  ext4_do_writepages+0xcd5/0x1830
[   17.335882]  ext4_writepages+0x19c/0x320
[   17.336169]  do_writepages+0xb5/0x2e0
[   17.336471]  __writeback_single_inode+0x72/0x650
[   17.336799]  writeback_sb_inodes+0x463/0x930
[   17.337130]  __writeback_inodes_wb+0x72/0x160
[   17.337474]  wb_writeback+0x211/0x4e0
[   17.337751]  wb_workfn+0x5df/0x8e0
[   17.338008]  process_one_work+0x545/0x9c0
[   17.338293]  worker_thread+0x33d/0x8d0
[   17.338561]  kthread+0x1b1/0x200
[   17.338809]  ret_from_fork+0x2f/0x50
[   17.339211]  ret_from_fork_asm+0x1b/0x30
[   17.339502] 
[   17.339622] value changed: 0x0000000001278000 -> 0x0000000001279000
[   17.340051] 
[   17.340170] Reported by Kernel Concurrency Sanitizer on:
[   17.340617] CPU: 1 PID: 31 Comm: kworker/u4:2 Not tainted 6.5.0 #8
[   17.341028] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
[   17.341684] Workqueue: writeback wb_workfn (flush-8:0)
[   17.342151] ==================================================================
[   17.566372] sshd (323) used greatest stack depth: 11664 bytes left

VM DIAGNOSIS:
09:11:19  Registers:
info registers vcpu 0
RAX=0000000080000000 RBX=0000000000000002 RCX=ffffffffa8c0c576 RDX=ffffa37781be6600
RSI=0000000080000000 RDI=ffffa37783cae100 RBP=ffffa377831a2260 RSP=ffffaef6406173c0
R8 =ffffffffaaac4448 R9 =0000000000000000 R10=ffffffffa8c0c591 R11=0001ffffffffffff
R12=ffffa377831a2206 R13=0000000000000003 R14=ffffa37783cae100 R15=ffffa377831a2250
RIP=ffffffffa7472721 RFL=00000202 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0018 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0000 0000000000000000 00000000 00000000
FS =0000 00007fc79c8b88c0 00000000 00000000
GS =0000 ffffa378b7c00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe1126034000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe1126032000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007fc797a880b8 CR3=00000001032c0003 CR4=00770ef0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00001f80
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM01=0000000000000000 0000000000000000 2e322e302e30313d 656d616e74736f68
YMM02=0000000000000000 0000000000000000 2022646873732f6e 6962732f7273752f
YMM03=0000000000000000 0000000000000000 223d657865202274 6f6f72223d746363
YMM04=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM05=0000000000000000 0000000000000000 5a5a5a5a5a5a5a5a 5a5a5a5a5a5a5a5a
YMM06=0000000000000000 0000000000000000 2020202020202020 2020202020202020
YMM07=0000000000000000 0000000000000000 0000ff00000000ff 0000000000ffffff
YMM08=0000000000000000 0000000000000000 0000000000000000 0000000000202020
YMM09=0000000000000000 0000000000000000 ff0000ffffffffff ff00000000ffffff
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0f4790056c4bc3fd 830d52ed55a010c3
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
info registers vcpu 1
RAX=0000000000000001 RBX=0000000000000001 RCX=ffffffffa8c515b4 RDX=0000000000000005
RSI=ffffffffa94c1c84 RDI=000000000001d87c RBP=ffffa37780209100 RSP=ffffaef64008bee8
R8 =ffffffffaaac4410 R9 =0000000000000000 R10=0000000000000005 R11=0001ffffffffffff
R12=0000000000000000 R13=0000000000000000 R14=0000000000000000 R15=0000000000000000
RIP=ffffffffa8c524bf RFL=00000216 [----AP-] CPL=0 II=0 A20=1 SMM=0 HLT=1
ES =0000 0000000000000000 00000000 00000000
CS =0010 0000000000000000 ffffffff 00a09b00 DPL=0 CS64 [-RA]
SS =0018 0000000000000000 ffffffff 00c09300 DPL=0 DS   [-WA]
DS =0000 0000000000000000 00000000 00000000
FS =0000 0000000000000000 00000000 00000000
GS =0000 ffffa378b7d00000 00000000 00000000
LDT=0000 0000000000000000 00000000 00000000
TR =0040 fffffe082053b000 00004087 00008b00 DPL=0 TSS64-busy
GDT=     fffffe0820539000 0000007f
IDT=     fffffe0000000000 00000fff
CR0=80050033 CR2=00007f5213303248 CR3=0000000103cea003 CR4=00770ee0
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d01
FCW=037f FSW=0000 [ST=0] FTW=00 MXCSR=00001f80
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
YMM00=0000000000000000 0000000000000000 0a746f6f72207265 737520726f662064
YMM01=0000000000000000 0000000000000000 335b646873732072 656c6c616b7a7973
YMM02=0000000000000000 0000000000000000 65736f6c63206e6f 6973736573203a29
YMM03=0000000000000000 0000000000000000 6e6f69737365733a 646873732878696e
YMM04=0000000000000000 0000000000000000 755f6d6170203a5d 3033335b64687373
YMM05=0000000000000000 0000000000000000 335b646873732072 656c6c616b7a7973
YMM06=0000000000000000 0000000000000000 656c696620686375 73206f4e203a656c
YMM07=0000000000000000 0000000000000000 74726f70203a3a20 6e6f20676e696e65
YMM08=0000000000000000 0000000000000000 0000000000000090 0000000000000000
YMM09=0000000000000000 0000000000000000 0000ffffffffffff ffffffffffffff00
YMM10=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM11=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM12=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM13=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM14=0000000000000000 0000000000000000 0000000000000000 0000000000000000
YMM15=0000000000000000 0000000000000000 0000000000000000 0000000000000000
